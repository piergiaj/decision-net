import sys
import json

def numberOfVals(node):
    q = 0
    used = []
    for p in node['CPT']:
        for event in p['event']:
            if node['name']+':' in event and event not in used:
                used.append(event)
                q += 1
    return max(q,1)


def simplicity(ID):
    val = 0
    for node in ID['nodes']:
        q = 0
        for p in node['parents']:
            parent = None
            for n in ID['nodes']:
                if n['id'] == p:
                    parent = n
                    break
            q += numberOfVals(parent)
        val += (numberOfVals(node)-1)*q
    return val

def main():
    print sys.argv[1]
    influenceDiagram = json.loads(sys.argv[1])
    print simplicity(influenceDiagram)

def test():
    pass

if __name__ == '__main__':
    if sys.argv[1] == 'test':
        test()
    else:
        main()
